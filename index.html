
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feudo ðŸŒ± - Mapa Centralizado</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      font-family: Arial, sans-serif;
      height: 100vh;
      width: 100vw;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #mapaContainer {
      width: calc(100vw - 113.38px);
      height: calc(100vh - 113.38px);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #mapa {
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      grid-template-rows: repeat(5, 1fr);
      background-image: url('MAPA.png');
      background-size: 100% 100%;
      user-select: none;
      touch-action: none;
    }

    .territorio {
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: #fff;
      position: relative;
      border: 1px solid transparent;
    }

    .territorio.dominado {
      color: #ffe;
    }

    .territorio img {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50%;
      height: 50%;
      object-fit: contain;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    .nome-dono {
      position: absolute;
      bottom: 2px;
      font-size: 0.7rem;
      background: rgba(0, 0, 0, 0.5);
      padding: 0 3px;
      border-radius: 3px;
      width: 100%;
      text-align: center;
      color: #fff;
      user-select: none;
    }

    #modalOverlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    #modal {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 320px;
      width: 90%;
      text-align: center;
    }

    #modal button {
      margin: 6px;
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    #modal button.conquistar { background: #d4af37; color: #3b2e00; }
    #modal button.neutro { background: #eee; color: #555; }
    #modal button.cancelar { background: #d9534f; color: #fff; }
  </style>
</head>
<body>

  <div id="mapaContainer">
    <div id="mapa"></div>
  </div>

  <div id="modalOverlay">
    <div id="modal">
      <h3>Escolha o dono do feudo ðŸŒ±</h3>
      <div id="botoesModal"></div>
    </div>
  </div>

<script>
  const personagens = ["Violetta","Leroy","Isolde","Corbin","Altemir","Baltazar"];
  const mapaDiv = document.getElementById("mapa");
  const modalOverlay = document.getElementById("modalOverlay");
  const botoesModal = document.getElementById("botoesModal");

  const territorios = Array.from({length:40},(_,i)=>({id:i+1,dono:null}));

  function atualizarMapa(){
    mapaDiv.innerHTML="";
    territorios.forEach((t,index)=>{
      const div=document.createElement("div");
      div.className="territorio";
      div.textContent=`T${t.id}`;

      if(t.dono){
        div.classList.add("dominado");
        const img=document.createElement("img");
        img.src=`${t.dono}.png`;
        img.alt=t.dono;
        div.appendChild(img);

        const tag=document.createElement("div");
        tag.className="nome-dono";
        tag.textContent=t.dono;
        div.appendChild(tag);
      }

      div.onclick=()=>abrirModal(t);
      mapaDiv.appendChild(div);
    });
  }

  function abrirModal(territorio){
    botoesModal.innerHTML="";
    if(!territorio.dono){
      personagens.forEach(p=>{
        const btn=document.createElement("button");
        btn.textContent=p;
        btn.className="conquistar";
        btn.onclick=()=>{territorio.dono=p;fecharModal();atualizarMapa();};
        botoesModal.appendChild(btn);
      });
    }else{
      const btnLib=document.createElement("button");
      btnLib.textContent="Neutro";
      btnLib.className="neutro";
      btnLib.onclick=()=>{territorio.dono=null;fecharModal();atualizarMapa();};
      botoesModal.appendChild(btnLib);

      const btnTransfer=document.createElement("button");
      btnTransfer.textContent="Transferir";
      btnTransfer.className="conquistar";
      btnTransfer.onclick=()=>{
        botoesModal.innerHTML="";
        personagens.forEach(p=>{
          const b=document.createElement("button");
          b.textContent=p;
          b.className="conquistar";
          b.onclick=()=>{territorio.dono=p;fecharModal();atualizarMapa();};
          botoesModal.appendChild(b);
        });
      };
      botoesModal.appendChild(btnTransfer);
    }

    const btnCancelar=document.createElement("button");
    btnCancelar.textContent="Cancelar";
    btnCancelar.className="cancelar";
    btnCancelar.onclick=fecharModal;
    botoesModal.appendChild(btnCancelar);

    modalOverlay.style.display="flex";
  }

  function fecharModal(){modalOverlay.style.display="none";}

  atualizarMapa();
</script>

</body>
</html>
